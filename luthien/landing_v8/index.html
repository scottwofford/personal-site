<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Luthien</title>
  <meta name="description" content="Open-source proxy that enforces rules on Claude Code.">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">

  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    html { scroll-behavior: smooth; font-size: 17.6px; }

    body {
      background: #09090b;
      color: #e4e4e7;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      overflow-x: hidden;
    }

    h1, h2, h3 {
      font-family: 'Inter', sans-serif;
      color: #fafafa;
      line-height: 1.2;
    }

    code, pre, .mono {
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
    }

    a { color: #6b9fff; text-decoration: none; }
    a:hover { color: #93b8ff; }

    .container { max-width: 960px; margin: 0 auto; padding: 0 24px; }

    section { padding: 40px 0; }
    @media (max-width: 640px) {
      section { padding: 28px 0; }
      .ux-grid { grid-template-columns: 1fr !important; }
    }

    hr.divider {
      border: none;
      border-top: 1px solid #27272a;
      margin: 0;
    }

    /* ========== SECTION HEADERS ========== */
    .section-header {
      font-size: clamp(1.5rem, 4vw, 2rem);
      font-weight: 700;
      margin-bottom: 20px;
    }

    /* ========== BUTTONS ========== */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 14px 28px;
      border-radius: 8px;
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      font-size: 0.95rem;
      text-decoration: none;
      transition: all 0.2s;
      cursor: pointer;
      border: none;
    }

    .btn-primary { background: #fafafa; color: #09090b; }
    .btn-primary:hover { background: #d4d4d8; color: #09090b; }

    .btn-secondary { background: transparent; color: #fafafa; border: 1px solid #3f3f46; }
    .btn-secondary:hover { border-color: #6b9fff; color: #6b9fff; }

    .btn-group { display: flex; gap: 16px; flex-wrap: wrap; }

    @media (max-width: 480px) {
      .btn-group { flex-direction: column; }
      .btn { text-align: center; justify-content: center; }
    }

    /* ========== HERO ========== */
    .hero {
      min-height: auto;
      display: flex;
      align-items: center;
      padding-top: 64px;
      padding-bottom: 40px;
    }

    .hero-content { max-width: 780px; margin: 0 auto; text-align: center; }

    .escalation {
      font-family: 'JetBrains Mono', monospace;
      font-size: clamp(1.1rem, 3vw, 1.5rem);
      font-weight: 500;
      color: #a1a1aa;
      line-height: 1.8;
      margin-bottom: 24px;
      max-width: 680px;
    }

    .escalation .strike {
      text-decoration: line-through;
      opacity: 0.5;
    }

    .escalation .caps {
      color: #ef4444;
      font-weight: 700;
    }

    .escalation .win {
      color: #34d399;
      font-weight: 700;
    }

    .hero h1 {
      font-size: clamp(1.3rem, 3vw, 1.8rem);
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 16px;
    }

    .hero-oneliner {
      font-size: clamp(0.85rem, 2vw, 1.03rem);
      color: #71717a;
      margin-bottom: 24px;
      max-width: 780px;
      line-height: 1.7;
    }

    /* ========== TOP NAV ========== */
    .top-nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: rgba(9, 9, 11, 0.85);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid #1a1a1e;
      padding: 0 24px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
    }

    .nav-logo {
      color: #6b9fff;
      flex-shrink: 0;
    }

    .nav-wordmark {
      font-family: 'Inter', sans-serif;
      font-size: 0.85rem;
      font-weight: 700;
      color: #c8c8d0;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .nav-link {
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      font-weight: 500;
      color: #52525b;
      text-decoration: none;
      transition: color 0.2s;
    }

    .nav-link:hover {
      color: #a1a1aa;
    }

    .nav-link.active {
      color: #fafafa;
    }

    .nav-gh {
      color: #52525b;
      transition: color 0.2s;
      display: flex;
    }

    .nav-gh:hover {
      color: #a1a1aa;
    }

    .nav-cta {
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      font-weight: 600;
      color: #09090b;
      background: #fafafa;
      padding: 6px 14px;
      border-radius: 6px;
      text-decoration: none;
      transition: background 0.15s;
    }

    .nav-cta:hover {
      background: #d4d4d8;
      color: #09090b;
    }

    @media (max-width: 640px) {
      .nav-link, .nav-gh { display: none; }
      .nav-right { gap: 12px; }
    }

    /* ========== CAROUSEL + MEME ROW ========== */
    .carousel-section {
      background: #0c0c0f;
    }

    .carousel-meme-row {
      display: flex;
      gap: 16px;
      align-items: flex-start;
    }

    .carousel-col {
      flex: 1;
      min-width: 0;
      overflow: hidden;
    }

    .meme-col {
      flex: 0 0 180px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }

    .meme-col .meme-label {
      font-family: 'JetBrains Mono', monospace;
      color: #a1a1aa;
      font-size: 0.75rem;
      text-align: center;
      margin-bottom: 8px;
      font-style: italic;
      font-weight: 500;
    }

    .meme-col .meme-img-wrap {
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 24px rgba(0,0,0,0.4);
    }

    .meme-col .meme-img-wrap img {
      width: 100%;
      display: block;
    }

    /* Meme popup on hover/tap */
    .meme-popup {
      display: none;
      position: fixed;
      width: 160px;
      z-index: 9999;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 8px 32px rgba(0,0,0,0.6);
      border: 1px solid #27272a;
    }
    .meme-popup.visible {
      display: block;
      animation: memeIn 0.15s ease-out;
    }
    @keyframes memeIn {
      from { opacity: 0; transform: translateX(6px); }
      to { opacity: 1; transform: translateX(0); }
    }
    .meme-trigger:hover { color: #e4e4e7; }

    @media (max-width: 768px) {
      .carousel-meme-row {
        flex-direction: column;
      }
      .meme-col {
        flex: none;
        width: 100%;
        max-width: 320px;
        margin: 0 auto;
      }
      .meme-popup { width: 180px; }
    }

    .carousel-wrapper {
      position: relative;
      overflow: hidden;
    }

    .carousel-track {
      transition: transform 0.35s ease;
    }

    .carousel-page {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .carousel-slide {
      flex-shrink: 0;
    }

    .card-date {
      font-size: 0.8rem;
      color: #52525b;
      text-align: right;
      margin-top: 4px;
      font-family: 'Inter', sans-serif;
    }

    .quote-card {
      background: #18181b;
      border: 1px solid #27272a;
      border-radius: 8px;
      padding: 12px 14px;
      max-width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      box-shadow: 0 1px 6px rgba(0,0,0,0.25);
      position: relative;
    }

    .quote-text {
      font-size: 0.95rem;
      color: #e4e4e7;
      line-height: 1.45;
      flex-grow: 1;
    }

    /* ---- Twitter/X card ---- */
    .quote-card.twitter {
      background: #15202b;
      border: 1px solid #2f3336;
      border-radius: 10px;
      padding: 12px 14px 20px;
      position: relative;
    }
    .quote-card.twitter .tweet-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 6px;
    }
    .quote-card.twitter .tweet-header {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .quote-card.twitter .tweet-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #2f3336;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #8899a6;
      font-weight: 700;
      font-size: 0.75rem;
      flex-shrink: 0;
    }
    .quote-card.twitter .tweet-name-row {
      display: flex;
      align-items: center;
      gap: 3px;
      flex-wrap: wrap;
    }
    .quote-card.twitter .tweet-display {
      color: #e7e9ea;
      font-weight: 700;
      font-size: 0.9rem;
    }
    .quote-card.twitter .tweet-handle {
      color: #71767b;
      font-size: 0.8rem;
    }
    .quote-card.twitter .tweet-time {
      color: #71767b;
      font-size: 0.8rem;
    }
    .quote-card.twitter .x-logo {
      color: #71767b;
      font-size: 0.95rem;
      flex-shrink: 0;
    }
    .quote-card.twitter .quote-text {
      font-style: normal;
      font-weight: 400;
      font-size: 0.95rem;
      color: #e7e9ea;
      line-height: 1.45;
      margin-bottom: 6px;
    }
    .quote-card.twitter .tweet-actions {
      display: flex;
      justify-content: space-between;
      max-width: 300px;
      color: #71767b;
      font-size: 0.75rem;
      padding-top: 2px;
    }
    .quote-card.twitter .tweet-action {
      display: flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      transition: color 0.15s;
    }
    .quote-card.twitter .tweet-action:hover { color: #1d9bf0; }
    .quote-card.twitter .tweet-action.retweet:hover { color: #00ba7c; }
    .quote-card.twitter .tweet-action.like:hover { color: #f91880; }
    .quote-card.twitter .tweet-action-icon { font-size: 0.85rem; }

    /* ---- HN card ---- */
    .quote-card.hn {
      background: #f6f6ef;
      border: none;
      border-radius: 3px;
      padding: 10px 14px 14px;
      position: relative;
    }
    .quote-card.hn .hn-title-row {
      display: flex;
      align-items: baseline;
      gap: 4px;
      margin-bottom: 2px;
    }
    .quote-card.hn .hn-upvote {
      color: #ff6600;
      font-size: 0.8rem;
      cursor: pointer;
    }
    .quote-card.hn .hn-title {
      font-family: Verdana, Geneva, sans-serif;
      font-size: 14px;
      color: #000;
      font-weight: normal;
    }
    .quote-card.hn .hn-meta {
      font-family: Verdana, Geneva, sans-serif;
      font-size: 11px;
      color: #828282;
      margin-bottom: 5px;
      line-height: 1.3;
    }
    .quote-card.hn .hn-meta a {
      color: #828282;
      text-decoration: none;
    }
    .quote-card.hn .hn-meta a:hover {
      text-decoration: underline;
    }
    .quote-card.hn .quote-text {
      font-family: Verdana, Geneva, sans-serif;
      font-style: normal;
      font-weight: normal;
      font-size: 14px;
      color: #000;
      line-height: 1.4;
      padding-bottom: 12px;
    }

    /* ---- Reddit card ---- */
    .quote-card.reddit {
      background: #1a1a1b;
      border: 1px solid #343536;
      border-radius: 6px;
      padding: 12px 14px 20px;
      position: relative;
    }
    .quote-card.reddit .reddit-top {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 12px;
      color: #818384;
      margin-bottom: 5px;
    }
    .quote-card.reddit .reddit-sub-icon {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff4500, #ff8717);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 0.4rem;
      font-weight: 700;
      flex-shrink: 0;
    }
    .quote-card.reddit .reddit-sub {
      color: #d7dadc;
      font-weight: 700;
      font-size: 12px;
    }
    .quote-card.reddit .reddit-posted {
      color: #818384;
      font-size: 12px;
    }
    .quote-card.reddit .quote-text {
      font-style: normal;
      font-weight: normal;
      color: #d7dadc;
      font-size: 0.95rem;
      line-height: 1.45;
      margin-bottom: 5px;
    }
    .quote-card.reddit .reddit-actions {
      display: flex;
      align-items: center;
      gap: 3px;
      font-size: 12px;
      color: #818384;
      font-weight: 700;
    }
    .quote-card.reddit .reddit-vote-group {
      display: flex;
      align-items: center;
      gap: 3px;
      background: #272729;
      border-radius: 14px;
      padding: 2px 6px;
      margin-right: 5px;
    }
    .quote-card.reddit .reddit-upvote-btn {
      color: #818384;
      cursor: pointer;
      font-size: 13px;
    }
    .quote-card.reddit .reddit-upvote-btn:hover {
      color: #ff4500;
    }
    .quote-card.reddit .reddit-vote-count {
      color: #d7dadc;
      font-size: 12px;
      font-weight: 700;
      min-width: 14px;
      text-align: center;
    }
    .quote-card.reddit .reddit-downvote-btn {
      color: #818384;
      cursor: pointer;
      font-size: 13px;
    }
    .quote-card.reddit .reddit-downvote-btn:hover {
      color: #7193ff;
    }
    .quote-card.reddit .reddit-action-btn {
      display: flex;
      align-items: center;
      gap: 3px;
      padding: 2px 5px;
      border-radius: 14px;
      cursor: pointer;
      transition: background 0.15s;
      font-size: 12px;
      font-weight: 700;
      color: #818384;
    }
    .quote-card.reddit .reddit-action-btn:hover {
      background: #272729;
    }

    /* ---- Medium card ---- */
    .quote-card.medium {
      background: #fff;
      border: none;
      border-left: 3px solid #1a8917;
      border-radius: 3px;
      padding: 14px 16px 18px;
      position: relative;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    }
    .quote-card.medium .medium-open-quote {
      font-size: 32px;
      line-height: 0.8;
      color: #1a8917;
      font-family: Georgia, 'Times New Roman', serif;
      margin-bottom: 4px;
    }
    .quote-card.medium .quote-text {
      font-style: normal;
      font-weight: 400;
      font-size: 0.95rem;
      line-height: 1.45;
      color: #292929;
      font-family: Georgia, 'Times New Roman', serif;
      letter-spacing: -0.003em;
    }
    .quote-card.medium .medium-divider {
      border: none;
      border-top: 1px solid #e6e6e6;
      margin: 8px 0 6px;
    }
    .quote-card.medium .medium-author {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .quote-card.medium .medium-avatar {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #1a8917;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 0.6rem;
      font-weight: 700;
      flex-shrink: 0;
    }
    .quote-card.medium .medium-author-info {
      display: flex;
      flex-direction: column;
      line-height: 1.2;
    }
    .quote-card.medium .medium-author-name {
      font-size: 12px;
      color: #292929;
      font-weight: 500;
    }
    .quote-card.medium .medium-pub-info {
      font-size: 11px;
      color: #757575;
    }

    /* ---- Blog card ---- */
    .quote-card.blog {
      background: #1c1c1e;
      border: 1px solid #2c2c2e;
      border-radius: 6px;
      padding: 14px 16px;
      position: relative;
    }
    .quote-card.blog .blog-open-quote {
      font-size: 2rem;
      line-height: 0.7;
      color: #52525b;
      font-family: Georgia, 'Times New Roman', serif;
      margin-bottom: 6px;
    }
    .quote-card.blog .quote-text {
      font-style: normal;
      font-weight: 400;
      font-size: 0.95rem;
      line-height: 1.45;
      font-family: Georgia, 'Times New Roman', serif;
      color: #e4e4e7;
    }
    .quote-card.blog .blog-footer {
      margin-top: 8px;
      padding-top: 6px;
      border-top: 1px solid #2c2c2e;
      font-size: 0.8rem;
      color: #71717a;
      font-family: 'Inter', sans-serif;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .quote-card.blog .blog-footer .blog-globe {
      font-size: 0.85rem;
    }
    .quote-card.blog .blog-footer .blog-domain {
      color: #a1a1aa;
      font-weight: 500;
    }
    .quote-card.blog .blog-footer .blog-date {
      color: #52525b;
    }

    /* ---- GitHub Issue card ---- */
    .quote-card.github {
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 5px;
      padding: 12px 14px;
    }
    .quote-card .platform-logo {
      position: absolute;
      top: 8px;
      right: 10px;
      opacity: 0.5;
    }
    .quote-card .platform-logo svg { width: 18px; height: 18px; }
    .quote-card.hn .hn-badge {
      position: absolute;
      top: 7px;
      right: 8px;
      width: 16px;
      height: 16px;
      background: #ff6600;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: 700;
      color: #fff;
      font-family: Verdana, Geneva, sans-serif;
    }
    .quote-card.blog .blog-badge {
      position: absolute;
      top: 8px;
      right: 10px;
      display: flex;
      align-items: center;
      gap: 3px;
      color: #71717a;
      font-size: 0.65rem;
      font-family: 'Inter', sans-serif;
      letter-spacing: 0.02em;
    }
    .quote-card.blog .blog-badge svg { opacity: 0.4; width: 15px; height: 15px; }
    .quote-card.github .gh-header {
      display: flex;
      align-items: center;
      gap: 5px;
      margin-bottom: 5px;
      font-size: 0.85rem;
    }
    .quote-card.github .gh-icon {
      width: 16px;
      height: 16px;
      fill: #3fb950;
      flex-shrink: 0;
    }
    .quote-card.github .gh-repo {
      color: #58a6ff;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
    }
    .quote-card.github .gh-issue-num {
      color: #8b949e;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
    }
    .quote-card.github .quote-text {
      font-size: 0.95rem;
      line-height: 1.45;
      color: #e6edf3;
    }
    .quote-card.github .gh-footer {
      margin-top: 6px;
      padding-top: 5px;
      border-top: 1px solid #21262d;
      font-size: 0.8rem;
      color: #8b949e;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .quote-card.github .gh-label {
      display: inline-block;
      padding: 0 5px;
      font-size: 0.7rem;
      font-weight: 600;
      line-height: 1.5;
      border-radius: 2em;
      border: 1px solid rgba(219,171,63,0.4);
      color: #d2a04a;
      background: rgba(219,171,63,0.1);
    }

    /* ---- Terminal/Internal card ---- */
    .quote-card.terminal {
      background: #0d1117;
      border: 1px solid #21262d;
      border-radius: 6px;
      padding: 0;
      overflow: hidden;
      position: relative;
    }
    .quote-card.terminal .term-chrome {
      background: #161b22;
      padding: 5px 10px;
      display: flex;
      align-items: center;
      gap: 5px;
      border-bottom: 1px solid #21262d;
    }
    .quote-card.terminal .term-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }
    .quote-card.terminal .term-dot.r { background: #ff5f56; }
    .quote-card.terminal .term-dot.y { background: #ffbd2e; }
    .quote-card.terminal .term-dot.g { background: #27c93f; }
    .quote-card.terminal .term-body {
      padding: 10px 14px 16px;
    }
    .quote-card.terminal .term-prompt {
      color: #3fb950;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      margin-bottom: 8px;
    }
    .quote-card.terminal .quote-text {
      font-style: normal;
      font-weight: 400;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.95rem;
      color: #c9d1d9;
      line-height: 1.6;
    }
    .quote-card.terminal .term-cursor {
      display: inline-block;
      width: 8px;
      height: 16px;
      background: #c9d1d9;
      vertical-align: text-bottom;
      margin-left: 2px;
      animation: blink 1s step-end infinite;
    }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    .carousel-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 12px;
    }

    .carousel-btn {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 1px solid #3f3f46;
      background: transparent;
      color: #a1a1aa;
      font-size: 0.75rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .carousel-btn:hover { border-color: #6b9fff; color: #6b9fff; }

    .carousel-dots { display: none; }

    /* Category dot bar */
    .cat-dot-area { text-align: center; margin-top: 14px; }
    .cat-dot-rows { display: inline-flex; flex-direction: column; align-items: center; gap: 3px; }
    .cat-dot-row { display: flex; gap: 2.5px; justify-content: center; flex-wrap: nowrap; }
    .cat-dot-segment { display: flex; gap: 2.5px; position: relative; cursor: default; }
    .cat-dot-segment + .cat-dot-segment { margin-left: 4px; }
    .cat-dot {
      width: 5px; height: 5px; border-radius: 50%;
      opacity: 0.5; transition: all 0.3s ease;
    }
    .cat-dot-segment:hover .cat-dot { opacity: 0.9; }
    .cat-dot-segment.active .cat-dot { opacity: 0.9; }
    .cat-dot-segment.active .cat-dot.hero {
      width: 6px; height: 6px;
      opacity: 1;
    }
    .cat-seg-tip {
      position: absolute; bottom: calc(100% + 8px); left: 50%;
      transform: translateX(-50%);
      font-family: 'JetBrains Mono', monospace; font-size: 0.5rem;
      color: #a1a1aa; background: #18181b; border: 1px solid #27272a;
      padding: 2px 7px; border-radius: 3px; white-space: nowrap;
      opacity: 0; pointer-events: none; transition: opacity 0.15s; z-index: 20;
    }
    .cat-dot-segment:hover .cat-seg-tip,
    .cat-dot-segment.active .cat-seg-tip { opacity: 1; }
    .cat-dot-segment.active .cat-seg-tip { color: #e4e4e7; }

    .carousel-stat {
      text-align: center;
      margin-top: 24px;
      font-size: 0.85rem;
      color: #52525b;
      font-family: 'JetBrains Mono', monospace;
    }

    /* ========== FLOW DIAGRAM ========== */
    .flow-diagram {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 24px;
      max-width: 700px;
      margin: 0 auto;
    }

    .flow-node {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 20px 24px;
      border: 1px solid #27272a;
      border-radius: 8px;
      background: #111113;
      min-width: 140px;
    }

    .flow-node-accent {
      border-color: #6b9fff;
      background: rgba(107, 159, 255, 0.06);
    }

    .flow-label {
      font-size: clamp(0.85rem, 2vw, 1rem);
      font-weight: 700;
      color: #fafafa;
    }

    .flow-sublabel {
      font-size: 0.7rem;
      color: #52525b;
    }

    .flow-arrow {
      font-size: 1.5rem;
      color: #3f3f46;
      flex-shrink: 0;
    }

    .flow-description {
      text-align: center;
      color: #71717a;
      font-size: 0.85rem;
      margin-top: 20px;
    }

    @media (max-width: 540px) {
      .flow-diagram { gap: 12px; }
      .flow-node { padding: 14px 16px; min-width: 100px; }
      .flow-arrow { font-size: 1.1rem; }
    }

    /* ========== QUICKSTART ========== */
    .quickstart-section { background: #0c0c0f; }

    .terminal {
      border: 1px solid #27272a;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 16px;
    }

    .terminal-header {
      background: #1a1a1e;
      padding: 10px 16px;
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .terminal-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }

    .terminal-dot.red { background: #ef4444; }
    .terminal-dot.yellow { background: #f59e0b; }
    .terminal-dot.green { background: #34d399; }

    .terminal pre {
      margin: 0 !important;
      border: none !important;
      border-radius: 0 !important;
      background: #111113 !important;
      font-size: 0.85rem !important;
    }

    .terminal pre code {
      font-family: 'JetBrains Mono', monospace !important;
      font-size: 0.85rem !important;
      line-height: 1.7 !important;
    }

    .prereqs {
      color: #3f3f46;
      font-size: 0.8rem;
      font-family: 'JetBrains Mono', monospace;
    }

    /* ========== CTA ========== */
    .cta-section { text-align: center; }

    .cta-section .section-header { margin-left: auto; margin-right: auto; }

    .cta-fine {
      color: #3f3f46;
      font-size: 0.8rem;
      font-family: 'JetBrains Mono', monospace;
      margin-top: 20px;
    }

    .cta-fine a { color: #52525b; }
    .cta-fine a:hover { color: #a1a1aa; }

    /* ========== FOOTER ========== */
    footer {
      border-top: 1px solid #1a1a1e;
      padding: 32px 0;
    }

    .footer-inner {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 24px;
    }

    .footer-links { display: flex; gap: 24px; }
    .footer-links a { color: #52525b; font-size: 0.85rem; }
    .footer-links a:hover { color: #a1a1aa; }

    .footer-meta {
      color: #3f3f46;
      font-size: 0.8rem;
    }

    @media (max-width: 640px) {
      .footer-inner {
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
    }
  </style>
</head>
<body>

  <!-- TOP NAV -->
  <nav class="top-nav">
    <a href="#" class="nav-left">
      <span class="nav-wordmark">Luthien</span>
    </a>
    <div class="nav-right">
      <a href="#quotes" class="nav-link active" data-section="quotes">problem</a>
      <a href="#ux" class="nav-link" data-section="ux">ux</a>
      <a href="#layers" class="nav-link" data-section="layers">architecture</a>
      <a href="https://github.com/LuthienResearch/luthien-proxy" class="nav-gh" target="_blank" rel="noopener" aria-label="GitHub"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg></a>
      <a href="https://calendar.app.google/jRFeKwFMC4jXfXjh9" class="nav-cta" target="_blank" rel="noopener">Book a Call</a>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1>Let AI code. Stay in control.</h1>
        <p class="hero-oneliner">Luthien is a proxy that sits between Claude Code (client) and the Claude API backend. It logs every request and response and enables you to set arbitrary rules/policies that can block dangerous operations, confirm the output is what you asked for, adheres to your claude.md and doesn't contain suspicious stuff, all without changing your dev setup.</p>
      </div>
    </div>
  </section>

  <!-- QUOTE CAROUSEL (the lead) -->
  <section class="carousel-section" id="quotes" style="padding-top: 56px; padding-bottom: 24px;">
    <div class="container" style="max-width: 560px;">
      <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; font-weight: 600; letter-spacing: 0.15em; text-transform: uppercase; color: #3f3f46; margin-bottom: 16px; text-align: left;">the problem</div>
      <h2 style="font-size: clamp(1.1rem, 2.5vw, 1.4rem); font-weight: 600; color: #e4e4e7; margin-bottom: 20px; text-align: left;">Claude Code does weird and suspicious stuff sometimes...</h2>
      <div class="carousel-wrapper" id="carouselWrapper">
        <div class="carousel-track" id="carouselTrack"></div>
      </div>
      <div class="carousel-controls">
        <button class="carousel-btn" id="prevBtn">&#9664;</button>
        <div class="carousel-dots" id="carouselDots"></div>
        <button class="carousel-btn" id="nextBtn">&#9654;</button>
      </div>
      <div class="cat-dot-area">
        <div class="cat-dot-rows" id="categoryDotBar"></div>
        <div style="margin-top: 10px;">
          <a href="incidents.html" style="font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: #52525b; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#a1a1aa'" onmouseout="this.style.color='#52525b'">see more <span style="display:inline-block;transition:transform 0.2s;">→</span></a>
        </div>
      </div>
      <div style="display: flex; align-items: center; justify-content: center; margin-top: 8px; position: relative;">
        <span class="meme-trigger" id="memeTrigger" style="margin: 0; font-family: 'JetBrains Mono', monospace; color: #a1a1aa; font-size: 0.7rem; font-style: italic; cursor: pointer; border-bottom: 1px dashed #3f3f46;">meanwhile...</span>
      </div>
      <div class="meme-popup" id="memePopup">
        <img src="ceo-ai-meme.jpg" alt="CEO AI meme" style="width: 100%; display: block; border-radius: 6px;">
      </div>
      </div>
    </div>
  </section>

  <hr class="divider">

  <!-- UX: BEFORE / AFTER -->
  <section id="ux" style="padding-top: 32px; padding-bottom: 32px;">
    <div class="container">
      <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; font-weight: 600; letter-spacing: 0.15em; text-transform: uppercase; color: #3f3f46; margin-bottom: 16px; text-align: left;">ux</div>
      <div class="ux-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; max-width: 900px;">
        <div>
          <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.6rem; color: #52525b; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 8px;">Before</div>
          <img src="terminal-without-luthien.svg" alt="Before: Claude Code runs pip install despite CLAUDE.md rules" style="width: 100%; border-radius: 8px; border: 1px solid #27272a;">
        </div>
        <div>
          <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.6rem; color: #52525b; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 8px;">After</div>
          <img src="terminal-with-luthien.svg" alt="After: pip install is blocked by Luthien, Claude retries with uv add" style="width: 100%; border-radius: 8px; border: 1px solid #27272a;">
        </div>
      </div>
    </div>
  </section>

  <hr class="divider">

  <!-- HOW IT WORKS -->
  <section id="layers" style="padding-top: 32px; padding-bottom: 32px;">
    <div class="container">
      <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; font-weight: 600; letter-spacing: 0.15em; text-transform: uppercase; color: #3f3f46; margin-bottom: 16px; text-align: left;">architecture</div>
      <style>
        .term-arch { max-width: 680px; margin: 0 auto; font-family: 'JetBrains Mono', monospace; }

        /* ASCII flow diagram */
        .term-flow { background: #111; border: 1px solid #27272a; border-radius: 8px; padding: 1.25rem 1.5rem; overflow-x: auto; }
        .term-flow pre { margin: 0; font-size: 0.8rem; line-height: 1.6; color: #a1a1aa; white-space: pre; }
        .term-flow .hl-you { color: #a1a1aa; }
        .term-flow .hl-luthien { color: #6b9fff; font-weight: 700; }
        .term-flow .hl-api { color: #a1a1aa; }
        .term-flow .hl-arrow { color: #3f3f46; }
        .term-flow .hl-pipe { color: #3f3f46; }
        .term-flow .hl-desc { color: #71717a; }
        .term-flow .hl-monitor { color: #6b9fff; }
        .term-flow .hl-block { color: #ef4444; }
        .term-flow .hl-change { color: #f59e0b; }
        .term-flow .hl-label { color: #52525b; }

        .arch-latency-note { text-align: right; margin-top: 0.5rem; }
        .arch-latency { font-size: 0.65rem; color: #22c55e; background: rgba(34,197,94,0.1); border: 1px solid rgba(34,197,94,0.2); padding: 0.15rem 0.5rem; border-radius: 20px; font-family: 'JetBrains Mono', monospace; }

        @media (max-width: 600px) {
          .term-flow { padding: 0.75rem; }
          .term-flow pre { font-size: 0.55rem; line-height: 1.5; }
        }
        @media (max-width: 400px) {
          .term-flow pre { font-size: 0.48rem; }
        }
      </style>

      <div class="term-arch">

        <!-- ASCII flow diagram -->
        <div class="term-flow"><pre>&#x1F9D1;&#x200D;&#x1F4BB; <span class="hl-you">You</span> <span class="hl-arrow">⇄</span> &#x1F4BB; <span class="hl-you">Claude Code</span> <span class="hl-arrow">⇄</span> <span class="hl-luthien">Luthien</span> <span class="hl-arrow">⇄</span> &#x2601;&#xFE0F; <span class="hl-api">Anthropic API</span>
                                    <span class="hl-pipe">|</span>
                             <span class="hl-desc">logs every request and response.</span>   <span class="arch-latency" style="display: inline;">~50ms</span>
                             <span class="hl-desc">you can configure arbitrary rules/policies to</span>
                             <span class="hl-desc">modify or block certain responses or requests:</span>
                                    <span class="hl-pipe">|</span>
                                    <span class="hl-pipe">|--</span> <span class="hl-monitor">did it do what I asked?</span>
                                    <span class="hl-pipe">|--</span> <span class="hl-change">did it follow CLAUDE.md?</span>
                                    <span class="hl-pipe">+--</span> <span class="hl-block">did it do something suspicious?</span>
                                    <span class="hl-pipe">|</span>
                                    <span class="hl-pipe">+--></span> &#x2601;&#xFE0F; <span class="hl-desc">can call another LLM (e.g. Haiku)</span>
                                         <span class="hl-desc">to evaluate your rules/policies</span></pre></div>

        <a href="https://github.com/LuthienResearch/luthien-proxy#6-create-your-own-policy" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 6px; margin-top: 0.75rem; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: #6b9fff;"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg> See GitHub to create your own rules/policies</a>


      </div>
    </div>
  </section>

  <hr class="divider">

  <!-- CTA -->
  <section class="cta-section" id="cta">
    <div class="container">
      <p style="font-size: 1.1rem; color: #a1a1aa; margin-bottom: 24px;">Open source. Early stage.<br>Book a call, and we'll help you set this up for your use cases.</p>

      <div style="display: flex; align-items: center; justify-content: center; gap: 28px;">
        <a href="https://github.com/LuthienResearch/luthien-proxy" class="nav-gh" target="_blank" rel="noopener" aria-label="GitHub" style="color: #a1a1aa; display: flex; transform: scale(1.5);"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg></a>
        <a href="https://calendar.app.google/jRFeKwFMC4jXfXjh9" class="nav-cta" target="_blank" rel="noopener" style="font-size: 1rem; padding: 10px 24px; border-radius: 8px;">Book a Call</a>
      </div>

      <p class="cta-fine">Apache 2.0 &middot; design partners wanted &middot; <a href="mailto:contact@luthienresearch.org">contact@luthienresearch.org</a></p>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="container">
      <div class="footer-inner">
        <div class="footer-meta">Luthien &middot; 2026</div>
      </div>
    </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>

  <script>
    (function () {
      "use strict";

      var quotes = [
        // === Pinned first 4 (best hits, in order) ===
        { text: "I\u2019m a product manager for a stochastic parrot.", source: "Scott Spence", format: "blog", sourceUrl: "https://scottspence.com/posts/working-with-claude-code-the-honest-version", date: "Jun 2025", cat: "overconfident" },
        { text: "Claude will absolutely try to bullshit its way through situations where it doesn\u2019t know the answer but won\u2019t admit it. So now I have to verify everything before letting it touch any code.", source: "Scott Spence", format: "blog", sourceUrl: "https://scottspence.com/posts/working-with-claude-code-the-honest-version", date: "Nov 2025", cat: "cheated" },
        { text: "Polite correction \u2014 ignored. Firm correction \u2014 ignored. ALL CAPS \u2014 partially followed. Profanity \u2014 finally worked. Multiple profanities \u2014 consistent compliance.", source: "GitHub #8154", format: "github", sourceUrl: "https://github.com/anthropics/claude-code/issues/8154", date: "Jul 2025", cat: "ignored" },
        { text: "If this was a junior dev you\u2019d given a task to, and they came back full of praise for themselves for the stellar job they\u2019d done \u2014 and then it turned out they\u2019d botched it badly, after a few times you\u2019d be having an HR discussion.", source: "Hacker News", format: "hn", sourceUrl: "https://news.ycombinator.com/item?id=44908733", date: "Jul 2025", cat: "overconfident" },
        { text: "Hopeless state. Harmfully negative productivity using AI to code.", source: "@VictorTaelin", format: "twitter", twitterDisplay: "Victor Taelin", twitterHandle: "@VictorTaelin", date: "Feb 2026", cat: "quality" },
        // === Rest (shuffled) ===
        { text: "Claude claimed: \u2018\u2705 SUCCESS! Phase 0 enhancement verification complete!\u2019 Reality check: Tables existed but no data was present.", source: "GitHub #8154", format: "github", sourceUrl: "https://github.com/anthropics/claude-code/issues/8154", date: "Jul 2025", cat: "cheated" },
        { text: "I went through several full context failed attempts at having it not hard code the test cases, until finally I inserted a block caps expletive laden entreaty to smarten up which appeared to work.", source: "marble.onl", format: "blog", sourceUrl: "https://www.marble.onl/posts/claude_code.html", date: "Jun 2025", cat: "ignored" },
        { text: "Claude acknowledges understanding the instruction, rephrases it accurately, then produces something unrelated or incomplete and then says\u2026 Done!", source: "GitHub #9115", format: "github", sourceUrl: "https://github.com/anthropics/claude-code/issues/9115", date: "Aug 2025", cat: "ignored" },
        { text: "Most people using these tools are wasting their time having to debug hallucinated bullshit.", source: "davydm on HN", format: "hn", sourceUrl: "https://news.ycombinator.com/item?id=44908875", date: "Jul 2025", cat: "hallucinated" },
        { text: "Slow, consumes way too much CPU, and freezes often. It also lies, goes for the quick-win, and even sabotages my code to pass tests.", source: "@MarcJSchmidt", format: "twitter", twitterDisplay: "Marc J. Schmidt", twitterHandle: "@MarcJSchmidt", date: "Jan 2026", cat: "cheated" },
        { text: "Not only bug not fixed, but it introduced 5 more bugs and made complete mess of codebase.", source: "@ChebzReal", format: "twitter", twitterDisplay: "ChebzReal", twitterHandle: "@ChebzReal", date: "Dec 2025", cat: "quality" },
        { text: "Spawned 36 parallel subagents\u2026 ran out of API credits\u2026 causing all the subagents to fail and get stuck.", source: "@stevehind", format: "twitter", twitterDisplay: "Steve Hind", twitterHandle: "@stevehind", date: "Feb 2026", cat: "loop" },
        { text: "Kept looping ignoring every request I made no matter if I restarted with fresh context or not.", source: "@BItguru00", format: "twitter", twitterDisplay: "BItguru00", twitterHandle: "@BItguru00", date: "Jan 2026", cat: "loop" },
        { text: "All the same LLM mistakes started cropping up\u2026 getting slower and slower\u2026 code quality is just not great.", source: "@VincasStonys", format: "twitter", twitterDisplay: "Vincas Stonys", twitterHandle: "@VincasStonys", date: "Feb 2026", cat: "quality" },
        { text: "Acting like a far less intelligent model\u2026 making unilateral \u2018shortcut\u2019 decisions without asking.", source: "@BenjaminDEKR", format: "twitter", twitterDisplay: "Benjamin", twitterHandle: "@BenjaminDEKR", date: "Jan 2026", cat: "ignored" },
        { text: "Each compaction is lossy. After several, you\u2019re working with a summary of a summary. Signal degrades into noise.", source: "@aeitroc", format: "twitter", twitterDisplay: "aeitroc", twitterHandle: "@aeitroc", date: "Feb 2026", cat: "context" },
        { text: "Forgetting the bash tool\u2026 refactors for 40 min and then rolls back everything\u2026 randomly switches to python\u2026 \u2018I\u2019m sorry I can\u2019t help you with that.\u2019", source: "@steipete", format: "twitter", twitterDisplay: "Peter Steinberger", twitterHandle: "@steipete", date: "Jan 2026", cat: "loop" },
        { text: "The model does not want to check in with you\u2026 edit tool is broken\u2026 never sees the errors.", source: "@marmaduke091", format: "twitter", twitterDisplay: "marmaduke", twitterHandle: "@marmaduke091", date: "Dec 2025", cat: "ignored" },
        { text: "Constantly pushes back. Complains about complexity of the tasks.", source: "@always_bulish", format: "twitter", twitterDisplay: "always_bulish", twitterHandle: "@always_bulish", date: "Jan 2026", cat: "ignored" },
        { text: "No process manager\u2026 way too pedantic\u2026 SO SLOW\u2026 randomly hangs.", source: "@NathanFlurry", format: "twitter", twitterDisplay: "Nathan Flurry", twitterHandle: "@NathanFlurry", date: "Feb 2026", cat: "quality" },
        { text: "Made more coding SYNTAX errors than the 3 years.", source: "@DanFarfan", format: "twitter", twitterDisplay: "Dan Farfan", twitterHandle: "@DanFarfan", date: "Nov 2025", cat: "quality" },
        { text: "Super super broken\u2026 chat histories are corrupted\u2026 worktrees got corrupted.", source: "@theo", format: "twitter", twitterDisplay: "Theo", twitterHandle: "@theo", date: "Feb 2026", cat: "deleted" },
        { text: "Nuking my 4 months worth of AI chats and completely messing up my setup.", source: "@Kingsley_codes", format: "twitter", twitterDisplay: "Kingsley", twitterHandle: "@Kingsley_codes", date: "Jan 2026", cat: "deleted" },
        { text: "When asked to write unit tests, it re-implemented the function in the test file and tested that, rather than testing the actual implementation.", source: "Tildes", format: "hn", date: "Jun 2025", cat: "cheated" },
        { text: "They do not really care what you want, they care what they want. They call it being helpful but what it really is, is ignoring what it is told to do.", source: "Tim Sylvester", format: "blog", date: "Jul 2025", cat: "ignored" },
        { text: "Then it says \u2018Yup, we are done here!\u2019 While the files you asked it to edit are a smoking ruin.", source: "Medium", format: "blog", date: "Aug 2025", cat: "overconfident" },
        { text: "Even instructions that Claude writes for itself, that describe exactly what needs to be done, get re-interpreted on the fly into something else entirely.", source: "Medium", format: "blog", date: "Aug 2025", cat: "ignored" },
        { text: "The moment Claude goes off-target, you have context pollution\u2026 it re-entrenches against that mistake on every single turn.", source: "Medium", format: "blog", date: "Aug 2025", cat: "context" },
        { text: "Instead of respecting existing code, it pushes the error further into the codebase. Now you have a cascade of failures.", source: "Medium", format: "blog", date: "Sep 2025", cat: "quality" },
        { text: "The agent malforms a tool call and deletes an entire file. Then seeing the file is empty, rewrites with beautiful nonsense.", source: "Medium", format: "blog", date: "Sep 2025", cat: "deleted" },
        { text: "Agents will rush off and screw up a ton of files in a single turn.", source: "Medium", format: "blog", date: "Oct 2025", cat: "quality" },
        { text: "When it needed access to a value from a file it was not allowed to read, it helpfully offered to remove the entries from .gitignore.", source: "Tildes", format: "hn", date: "Jun 2025", cat: "security" },
        { text: "If you are willing to just let the damn thing go off and do whatever it wants, you will not get a useful product, you will get spaghetti slop.", source: "Medium", format: "blog", date: "Oct 2025", cat: "quality" },
        { text: "As soon as your codebase gets a little bit weird the model starts hallucinating.", source: "Hacker News", format: "hn", date: "Jul 2025", cat: "hallucinated" },
        { text: "Mid-response, suddenly inserted ###Human: and proceeded to generate fake user input including code snippets.", source: "GitHub Issue", format: "github", date: "Nov 2025", cat: "hallucinated" }
      ];

      var track = document.getElementById("carouselTrack");

      function buildCardHTML(q) {
        var plainText = q.text;

        switch (q.format) {
          case "twitter":
            var initial = q.twitterDisplay ? q.twitterDisplay.charAt(0).toUpperCase() : "?";
            return '<div class="quote-card twitter">' +
              '<div class="tweet-top">' +
                '<div class="tweet-header">' +
                  '<div class="tweet-avatar">' + initial + '</div>' +
                  '<div>' +
                    '<div class="tweet-name-row">' +
                      '<span class="tweet-display">' + (q.twitterDisplay || "") + '</span>' +
                      '<span class="tweet-handle">' + (q.twitterHandle || "") + ' \u00B7 2h</span>' +
                    '</div>' +
                  '</div>' +
                '</div>' +
                '<span class="x-logo">\ud835\udd4f</span>' +
              '</div>' +
              '<p class="quote-text">' + plainText + '</p>' +
              '<div class="tweet-actions">' +
                '<span class="tweet-action"><span class="tweet-action-icon">\uD83D\uDCAC</span> 47</span>' +
                '<span class="tweet-action retweet"><span class="tweet-action-icon">\uD83D\uDD01</span> 312</span>' +
                '<span class="tweet-action like"><span class="tweet-action-icon">\u2661</span> 1.4K</span>' +
                '<span class="tweet-action"><span class="tweet-action-icon">\uD83D\uDCCA</span> 89K</span>' +
                '<span class="tweet-action"><span class="tweet-action-icon">\u2197</span></span>' +
              '</div>' +
            '</div>';

          case "hn":
            return '<div class="quote-card hn">' +
              '<span class="hn-badge">Y</span>' +
              '<div class="hn-title-row">' +
                '<span class="hn-upvote">\u25B2</span>' +
                '<span class="hn-title">Claude Code incident report: deleted production database</span>' +
              '</div>' +
              '<div class="hn-meta">847 points by throwaway_dev 3 hours ago | <a href="#">hide</a> | <a href="#">412 comments</a></div>' +
              '<p class="quote-text">' + plainText + '</p>' +
            '</div>';

          case "reddit":
            return '<div class="quote-card reddit">' +
              '<div class="reddit-top">' +
                '<span class="reddit-sub-icon">r/</span>' +
                '<span class="reddit-sub">r/programming</span>' +
                '<span class="reddit-posted">\u00B7 Posted by u/throwaway \u00B7 6h</span>' +
              '</div>' +
              '<p class="quote-text">' + plainText + '</p>' +
              '<div class="reddit-actions">' +
                '<span class="reddit-vote-group">' +
                  '<span class="reddit-upvote-btn">\u25B2</span>' +
                  '<span class="reddit-vote-count">1.2k</span>' +
                  '<span class="reddit-downvote-btn">\u25BC</span>' +
                '</span>' +
                '<span class="reddit-action-btn">\uD83D\uDCAC 47 Comments</span>' +
                '<span class="reddit-action-btn">\u2197 Share</span>' +
                '<span class="reddit-action-btn">\u00B7\u00B7\u00B7</span>' +
              '</div>' +
            '</div>';

          case "medium":
            return '<div class="quote-card medium">' +
              '<div class="medium-open-quote">\u201C</div>' +
              '<p class="quote-text">' + plainText + '</p>' +
              '<hr class="medium-divider">' +
              '<div class="medium-author">' +
                '<div class="medium-avatar">E</div>' +
                '<div class="medium-author-info">' +
                  '<span class="medium-author-name">Elliot JL</span>' +
                  '<span class="medium-pub-info">Published in Towards AI \u00B7 4 min read</span>' +
                '</div>' +
              '</div>' +
            '</div>';

          case "github":
            var issueNum = q.source.replace(/[^0-9#]/g, '');
            return '<div class="quote-card github">' +
              '<svg class="platform-logo" width="20" height="20" viewBox="0 0 16 16" fill="#8b949e"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>' +
              '<div class="gh-header">' +
                '<svg class="gh-icon" viewBox="0 0 16 16"><path d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"/><path fill-rule="evenodd" d="M8 0a8 8 0 100 16A8 8 0 008 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"/></svg>' +
                '<span class="gh-repo">anthropics/claude-code</span>' +
                '<span class="gh-issue-num">' + issueNum + '</span>' +
              '</div>' +
              '<p class="quote-text">' + plainText + '</p>' +
              '<div class="gh-footer">' +
                '<span class="gh-label">bug</span>' +
                '<span>\uD83D\uDCAC 47 comments</span>' +
              '</div>' +
            '</div>';

          case "blog":
            var blogDomain = q.sourceUrl ? new URL(q.sourceUrl).hostname.replace('www.', '') : q.source;
            return '<div class="quote-card blog">' +
              '<span class="blog-badge"><svg width="16" height="10" viewBox="0 0 1043.63 592.71" fill="#71717a"><path d="M588.67 296.36c0 163.67-131.78 296.35-294.33 296.35S0 460 0 296.36 131.78 0 294.34 0s294.33 132.69 294.33 296.36"/><path d="M911.56 296.36c0 154.06-65.89 278.86-147.17 278.86s-147.17-124.8-147.17-278.86S683.11 17.5 764.39 17.5s147.17 124.8 147.17 278.86"/><path d="M1043.63 296.36c0 138-23.17 249.94-51.76 249.94s-51.75-111.91-51.75-249.94 23.17-249.94 51.75-249.94 51.76 111.9 51.76 249.94"/></svg></span>' +
              '<div class="blog-open-quote">\u201C</div>' +
              '<p class="quote-text">' + plainText + '</p>' +
              '<div class="blog-footer">' +
                '<span class="blog-globe">\uD83C\uDF10</span>' +
                '<span class="blog-domain">' + blogDomain + '</span>' +
              '</div>' +
            '</div>';

          case "terminal":
            return '<div class="quote-card terminal">' +
              '<div class="term-chrome">' +
                '<span class="term-dot r"></span>' +
                '<span class="term-dot y"></span>' +
                '<span class="term-dot g"></span>' +
              '</div>' +
              '<div class="term-body">' +
                '<p class="quote-text">' + plainText + '<span class="term-cursor"></span></p>' +
              '</div>' +
            '</div>';

          default:
            return '<div class="quote-card"><p class="quote-text">' + plainText + '</p></div>';
        }
      }

      // Shuffle only non-pinned quotes (after first 5)
      var pinCount = 5;
      for (var i = quotes.length - 1; i > pinCount; i--) {
        var j = pinCount + Math.floor(Math.random() * (i - pinCount + 1));
        var temp = quotes[i]; quotes[i] = quotes[j]; quotes[j] = temp;
      }

      // Render one card per slide
      quotes.forEach(function (q) {
        var slide = document.createElement("div");
        slide.className = "carousel-slide";
        slide.innerHTML = buildCardHTML(q) + (q.date ? '<div class="card-date">' + q.date + '</div>' : '');
        track.appendChild(slide);
      });

      // Single-card horizontal carousel
      var currentIndex = 0;
      var totalSlides = quotes.length;
      var dotsContainer = document.getElementById("carouselDots");
      var prevBtn = document.getElementById("prevBtn");
      var nextBtn = document.getElementById("nextBtn");
      var wrapper = document.getElementById("carouselWrapper");

      // Size slides to wrapper width
      function setupTrack() {
        var w = wrapper.offsetWidth;
        track.style.display = "flex";
        track.style.gap = "0px";
        var slides = track.querySelectorAll(".carousel-slide");
        slides.forEach(function (s) {
          s.style.minWidth = w + "px";
          s.style.maxWidth = w + "px";
        });
      }
      setupTrack();
      window.addEventListener("resize", function () { setupTrack(); goTo(currentIndex); });

      // Dots (cap at 8)
      var dotCount = Math.min(totalSlides, 8);
      for (var d = 0; d < dotCount; d++) {
        var dot = document.createElement("button");
        dot.className = "carousel-dot" + (d === 0 ? " active" : "");
        dot.setAttribute("data-index", d);
        dot.addEventListener("click", function () {
          goTo(parseInt(this.getAttribute("data-index")));
        });
        dotsContainer.appendChild(dot);
      }

      // Category dot bar
      var catColors = {
        cheated:'#ef4444', security:'#f97316', hallucinated:'#a855f7', ignored:'#eab308',
        deleted:'#ec4899', loop:'#6366f1', incomplete:'#14b8a6', overconfident:'#f59e0b',
        quality:'#22c55e', context:'#06b6d4'
      };
      var catLabels = {
        cheated:'lied / cheated', security:'security risk', hallucinated:'hallucinated',
        ignored:'ignored rules', deleted:'deleted code', loop:'looping',
        incomplete:'incomplete', overconfident:'overconfident', quality:'low quality',
        context:'context loss'
      };
      var catCounts = { cheated:9, security:7, hallucinated:10, ignored:11, deleted:7, loop:8, incomplete:12, overconfident:9, quality:14, context:7 };
      var catOrder = ['cheated','security','hallucinated','ignored','deleted','loop','incomplete','overconfident','quality','context'];
      var splitAt = 5;
      var catBar = document.getElementById("categoryDotBar");
      var catSegments = {};

      var row1 = document.createElement("div"); row1.className = "cat-dot-row";
      var row2 = document.createElement("div"); row2.className = "cat-dot-row";

      catOrder.forEach(function(cat, i) {
        var row = i < splitAt ? row1 : row2;
        var seg = document.createElement("div");
        seg.className = "cat-dot-segment";
        seg.setAttribute("data-cat", cat);
        var tip = document.createElement("div");
        tip.className = "cat-seg-tip";
        tip.textContent = catLabels[cat];
        seg.appendChild(tip);
        for (var j = 0; j < catCounts[cat]; j++) {
          var d = document.createElement("div");
          d.className = "cat-dot";
          d.style.background = catColors[cat];
          seg.appendChild(d);
        }
        row.appendChild(seg);
        catSegments[cat] = seg;
      });

      catBar.appendChild(row1);
      catBar.appendChild(row2);

      function highlightCategory(activeCat) {
        catOrder.forEach(function(cat) {
          var seg = catSegments[cat];
          var isActive = cat === activeCat;
          seg.classList.toggle("active", isActive);
          var dots = seg.querySelectorAll(".cat-dot");
          dots.forEach(function(d) { d.classList.remove("hero"); });
          if (isActive) {
            var mid = Math.floor(dots.length / 2);
            dots[mid].classList.add("hero");
          }
        });
      }

      // Initial highlight
      if (quotes[0].cat) highlightCategory(quotes[0].cat);

      function goTo(idx) {
        if (idx < 0) idx = totalSlides - 1;
        if (idx >= totalSlides) idx = 0;
        currentIndex = idx;
        track.style.transform = "translateX(-" + (currentIndex * wrapper.offsetWidth) + "px)";
        var dots = dotsContainer.querySelectorAll(".carousel-dot");
        var dotIdx = Math.min(currentIndex, dotCount - 1);
        dots.forEach(function (dd, i) { dd.classList.toggle("active", i === dotIdx); });
        // Highlight matching category
        if (quotes[currentIndex] && quotes[currentIndex].cat) {
          highlightCategory(quotes[currentIndex].cat);
        }
      }

      prevBtn.addEventListener("click", function () { goTo(currentIndex - 1); });
      nextBtn.addEventListener("click", function () { goTo(currentIndex + 1); });

      // Auto-advance every 4s
      var autoTimer = setInterval(function () { goTo(currentIndex + 1); }, 4000);
      wrapper.addEventListener("mouseenter", function () { clearInterval(autoTimer); });
      wrapper.addEventListener("mouseleave", function () {
        autoTimer = setInterval(function () { goTo(currentIndex + 1); }, 4000);
      });
    })();
  </script>

  <!-- Scroll spy for nav -->
  <script>
    (function () {
      var navLinks = document.querySelectorAll('.nav-link[data-section]');
      var sections = [];
      navLinks.forEach(function (link) {
        var el = document.getElementById(link.getAttribute('data-section'));
        if (el) sections.push({ id: link.getAttribute('data-section'), el: el });
      });

      var observer = new IntersectionObserver(function (entries) {
        entries.forEach(function (entry) {
          if (entry.isIntersecting) {
            navLinks.forEach(function (l) { l.classList.remove('active'); });
            var active = document.querySelector('.nav-link[data-section="' + entry.target.id + '"]');
            if (active) active.classList.add('active');
          }
        });
      }, { threshold: 0.15, rootMargin: '-48px 0px -50% 0px' });

      sections.forEach(function (s) { observer.observe(s.el); });
    })();
  </script>

  <!-- Meme popup: hover on desktop, tap on mobile -->
  <script>
    (function () {
      var trigger = document.getElementById('memeTrigger');
      var popup = document.getElementById('memePopup');
      if (!trigger || !popup) return;

      function positionPopup() {
        var rect = trigger.getBoundingClientRect();
        popup.style.right = (window.innerWidth - rect.left + 10) + 'px';
        popup.style.top = Math.max(8, rect.top + rect.height / 2 - popup.offsetHeight / 2) + 'px';
      }

      function showPopup() {
        popup.classList.add('visible');
        positionPopup();
      }

      function hidePopup() {
        popup.classList.remove('visible');
      }

      // Desktop: hover
      trigger.addEventListener('mouseenter', showPopup);
      trigger.addEventListener('mouseleave', function () {
        setTimeout(function () {
          if (!popup.matches(':hover')) hidePopup();
        }, 150);
      });
      popup.addEventListener('mouseleave', function () {
        setTimeout(function () {
          if (!trigger.matches(':hover')) hidePopup();
        }, 150);
      });

      // Mobile: tap to toggle
      trigger.addEventListener('click', function (e) {
        e.preventDefault();
        if (popup.classList.contains('visible')) {
          hidePopup();
        } else {
          showPopup();
        }
      });

      // Close on tap outside (mobile)
      document.addEventListener('click', function (e) {
        if (!trigger.contains(e.target) && !popup.contains(e.target)) {
          hidePopup();
        }
      });
    })();
  </script>
</body>
</html>
